---
title: "Práctica AE"
author: "Antonio Galián Gálvez"
date: "2024-10-28"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 0. Cargamos los datos y eliminamos la columna train
```{r}
# Cargamos los datos con separador de tabulador
datos <- read.delim("prostate.data.txt", header = TRUE, sep = "\t")

# Eliminamos la columna train
datos <- datos[, -ncol(datos)]

# Veeos la estructura de los datos
dim(datos)
names(datos)
str(datos)

# Eliminamos la columna de identificador del paciente
datos <- datos[, -1]

str(datos)


sum(is.na(datos)) # no hay na


summary(datos) # no estan estandarizadas, aun no es necesario

# algunas estan en log porque el rango es muy amplio
```

#2

```{r}

attach(datos)

datos$svi <- as.factor(datos$svi)

datos$gleason <- as.factor(datos$gleason)

datos$age <- as.factor(datos$age)



str(datos)
```
#3
```{r}
a <- datos[datos$gleason == "7", ]

b <- a[a$svi == "0", ]

num.a <- dim(a)[1]

num.b <- dim(b)[1]

porcentaje.ab <- num.b / (num.a) * 100

c <- datos[datos$svi == "0", ]

d <- c[c$gleason == "7", ]

num.c <- dim(c)[1]

num.d <- dim(d)[1]

porcentaje.cd <- num.d / (num.c) * 100


tabla <- table(svi, gleason)




chi_square_test <- chisq.test(tabla) # ???
```

#4

```{r}
recta <- lm(lpsa ~ lcavol)

summary(recta)

plot(lcavol, lpsa)
abline(recta, col = "red")

confint(recta, level = 0.95)

r1 <- residuals(recta)
sqrt(sum(r1^2) / (dim(datos)[1] - 2)) # RSE
```


